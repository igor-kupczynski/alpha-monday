# Alpha Monday - Low Level Design: CI (GitHub Actions)

Date: 2026-01-30
Status: draft

## Goals
- Run the test suite on every push and pull request.
- Mirror local DB defaults with a disposable Postgres service.
- Keep CI minimal and fast.

## Non-goals (v1)
- Linting, static analysis, or formatting checks.
- Multi-version Go matrix testing.
- Deployment automation.

## Decision
Use a single GitHub Actions workflow that runs `make lint` and `go test ./...` with a Postgres service container.

## Workflow
- Triggers: `push`, `pull_request`.
- Runner: `ubuntu-latest`.
- Services: `postgres:16-alpine` with health check.
- Env: `DATABASE_URL=postgres://alpha:alpha@localhost:5432/alpha_monday?sslmode=disable`.

## Steps
1. Checkout repository.
2. Set up Go using `go-version-file: go.mod` (Go 1.25.6) with caching.
3. Install `staticcheck`.
4. Run `make lint`.
5. Run `go test ./...`.

## Notes
- CI does not invoke `docker compose` or local scripts.
- The service container exposes Postgres on localhost:5432 for the test suite.
- Local testing should use `make test`, which brings up the DB via docker compose.
